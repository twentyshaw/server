<!DOCTYPE html>
<html>
<head>
	<title>frank</title>
</head>
<body>
	<button id="clickMe">请求Jack响应</button>
	<script type="text/javascript">
		clickMe.addEventListener('click',(e)=>{
			let script = document.createElement('script')
			let functionName = 'frank'+parseInt(Math.random()*100000,10)
			window[functionName] = function(result){
				alert('Thanks to Jack')
			}
			script.src = 'http://jack.com:8002/pay?callback=' + functionName
			document.body.appendChild(script)
			script.onload = function(e){
				e.currentTarget.remove()
				delete window[functionName]
			}
			script.onerror = function(e){
				alert('fail')
				e.currentTarget.remove()
				delete window[functionName]
			}
		})
	</script>
</body>
</html>